<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer Documentation &mdash; libnomp  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/main_stylesheet.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Internal API" href="internal-api.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> libnomp
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Build Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">How to Use Nomp</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-api.html">User API</a></li>
<li class="toctree-l1"><a class="reference internal" href="internal-api.html">Internal API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#variable-names">Variable names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#braces">Braces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formatting-files-before-committing">Formatting files before committing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-github-actions">Debugging github actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging-libnomp-tests">Debugging libnomp tests</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">libnomp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Developer Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/developer-docs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developer-documentation">
<h1>Developer Documentation<a class="headerlink" href="#developer-documentation" title="Permalink to this heading"></a></h1>
<section id="variable-names">
<h2>Variable names<a class="headerlink" href="#variable-names" title="Permalink to this heading"></a></h2>
<p>Use <cite>snake_case</cite> for all variables. In addition, for preprocessor constants and
enum members we use capital letters.</p>
</section>
<section id="braces">
<h2>Braces<a class="headerlink" href="#braces" title="Permalink to this heading"></a></h2>
<p>Omit the braces for a block if it has only a single statement. For example, <cite>if</cite>
with a single statement in the body, or <cite>for</cite> with a single statement in the
body.  Keep braces in the following <cite>for</cite> loop (even if they can be omitted
without any change to program logic) since it has two lines in the body.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;i &lt; 5&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Also, in an <cite>if-then-else</cite> block, if at least one branch has more than one
statement in the body, use braces for all the branches like below:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;a &lt; 5&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;a == 5&quot;</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;a &gt; 5&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>instead of:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;a &lt; 5&quot;</span><span class="p">);</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;a == 5&quot;</span><span class="p">);</span>
<span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;a &gt; 5&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="formatting-files-before-committing">
<h2>Formatting files before committing<a class="headerlink" href="#formatting-files-before-committing" title="Permalink to this heading"></a></h2>
<p>Run <cite>clang-format</cite> before committing any changes you make on the source files.
<cite>clang-format</cite> will be available if you install the dev dependencies with conda.
Run <cite>clang-format</cite> as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>clang-format<span class="w"> </span>-i<span class="w"> </span>**/*.<span class="o">[</span>ch<span class="o">]</span>
</pre></div>
</div>
<p>If you change any python files, please use <cite>black</cite> and <cite>isort</cite> to format the
python code and then check with <cite>flake8</cite> before committing. <cite>black</cite>, <cite>isort</cite>
and <cite>flake8</cite>  will be available if you install the dev dependencies with
conda.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>black<span class="w"> </span>.
isort<span class="w"> </span>.
flake8
</pre></div>
</div>
</section>
<section id="debugging-github-actions">
<h2>Debugging github actions<a class="headerlink" href="#debugging-github-actions" title="Permalink to this heading"></a></h2>
<p><cite>tmate</cite> can be used to <cite>ssh</cite> into a github runner instance when the workflow is
launched manually from github.</p>
<p>Select the relevant workflow under <cite>Actions</cite> tab and then click <cite>run workflow</cite>
button and select run with <cite>tmate</cite>. This will run <cite>tmate</cite> action in the very
beginning of the selected workflow and you will see a <cite>ssh</cite> address that can
be used to connect to the runner instance.</p>
<p>Once connected to the runner instance, to continue the rest of the workflow
type the following in the <cite>libnomp</cite> project directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch<span class="w"> </span><span class="k">continue</span>
</pre></div>
</div>
<p>Then the workflow will continue and you can monitor the progress on GitHub.
If the workflow fails at some point, you can use the session you are connected
for debugging. Session will be kept alive for 30 minutes after failure.</p>
<p>More info on tmate can be found
<a class="reference external" href="https://mxschmitt.github.io/action-tmate/">here</a>.</p>
</section>
<section id="debugging-libnomp-tests">
<h2>Debugging libnomp tests<a class="headerlink" href="#debugging-libnomp-tests" title="Permalink to this heading"></a></h2>
<p>After installing libnomp, you can debug the test cases using the <cite>lnrun</cite> script.
As a prerequisite you have to install the <cite>gdbserver</cite> which you can install with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>gdbserver
</pre></div>
</div>
<p>Use <code class="code docutils literal notranslate"><span class="pre">lnrun</span> <span class="pre">debug</span></code> command to host the debugging session. If you want to debug the
test case <cite>nomp-api-200</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lnrun<span class="w"> </span>debug<span class="w"> </span><span class="m">200</span>
</pre></div>
</div>
<p>Additionally, you can set the port and the target device for the specific session.
You can view the available options by <code class="code docutils literal notranslate"><span class="pre">lnrun</span> <span class="pre">-h</span> <span class="pre">debug</span></code>.</p>
<p>By default the test starts on <cite>localhost:5005</cite>, and a debug viewer should be connected
to this target address. For example, the following figure shows how clion connects to
the test case using remote debug.</p>
<img alt="clion_debug" src="_images/clion_debug.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="internal-api.html" class="btn btn-neutral float-left" title="Internal API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, nomp-org.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>